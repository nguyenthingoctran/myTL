{% extends "main_layout.html" %}

{% block title %}Demo drapable{% endblock  %}

{% block style %}

  .testimonial-group {
    overflow-x: scroll;
    white-space: nowrap;
    overflow-y: hidden;
  }
  .testimonial-group > .row {
    display: inline-block;
    float: none;
  }

  @media screen and (max-width: 800px) {
    <!-- .testimonial-group {
      background: red;
      height: 200px;
    } -->
    body {
      background-color : blue;
    }
  }
{% endblock  %}

{% block breadcrumb %}
        <ol class="breadcrumb">
          <li class="breadcrumb-item">Home</li>
          <li class="breadcrumb-item">
            <a href="#">Feature</a>
          </li>
          <li class="breadcrumb-item active">Demo drapable</li>
        </ol>
{% endblock  %}

{% block content %}


<!-- ======================================================================== -->
<!-- ==================== Test draggable - droppable ======================== -->
<!-- ======================================================================== -->

<div id="wrap-all" class="container-fluid" style="height : 90%">
    <div class="animated fadeIn testimonial-group" style="height:750px;">
      <div class="row" style="height:100%">

        {% for lifecycle in list_lifecycle %}
          <div class="col-3 d-inline-block" style="height:100%">
            <div class="row h-100">
              <div class="col-md-12" style="height: 97%">
                <div class="card card-accent-info h-100" >
                  <!-- Header -->
                  <div class="card-header">{{lifecycle.label}}</div>
                  <div class="card-body connect-sortable" style="height:100%; overflow: auto">
                      <div class="alert alert-primary drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-danger drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-success drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-warning drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-primary drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-danger drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-success drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                      <div class="alert alert-warning drag" role="alert">
                          A simple primary alert—check it out!
                      </div>
                  </div>
                </div>
              </div>
            </div>
          </div>        
        {% endfor %}

      </div>
    </div>
  </div>


<script>
    // Lấy index của list 
    $(".card-body").sortable({
      start : function(event, ui){
        
        $(this).parent().parent().parent().parent().prevAll().find(".card-body").removeClass('connect-sortable').addClass('no-sort').css({'pointer-events':'none','opacity':'0.5'});        
      },
      sort : function(){
        $(".card-body").sortable("refresh");

        // Tọa độ của mouse
        
        $(window).mousemove(function (e) {
          var x = $(".testimonial-group").innerWidth() - 200,
              y = $(".testimonial-group").scrollLeft() + 50; 
          
          if ($('.alert').offset().left > x) {
              //Down
              $('.testimonial-group').animate({
                  scrollLeft: x // adjust number of px to scroll down
              }, 600);
          }else{
            $('.testimonial-group').animate({

            });      
          }
        });



      },
      stop : function(){
        $(this).parent().parent().parent().parent().prevAll().find(".card-body").removeClass('no-sort').addClass('connect-sortable').css({'pointer-events':'auto','opacity':'1'});
      },
      connectWith : '.connect-sortable',
    });

$(document).ready(function(){

});


</script>

{% endblock  %}